{"version":3,"file":"build.js","sources":["../src/utils/image.js","../src/utils/display.js","../src/index.js"],"sourcesContent":["let regex = /^\\/?(?:.+\\/)*(.+)\\./\n\nexport default { load }\n\nfunction load(paths, callback) {\n  if (!callback)\n    return\n  if (!Array.isArray(paths))\n    return loadOne(paths, callback)\n  let images = []\n  let index  = 0\n  let max    = paths.length\n  let path   = paths[index]\n  let loaded = [path]\n  function next(image) {\n    let id = regex.exec(path)[1]\n    if (!images[id])\n      images[id] = image\n    else\n      images[id] = [images[id], image]\n    images[index++] = image\n    if (index >= max)\n      return callback(images)\n    path = paths[index]\n    loadOne(path, next)\n  }\n  loadOne(path, next)\n}\n\nfunction loadOne(path, callback) {\n  if (!callback)\n    return\n  let image = new Image\n  image.src = path\n  image.onload = function () {\n    callback(image)\n  }\n}\n","export default { create }\n\nfunction create(size) {\n\n  let [width, height] = size\n\n  let canvas  = document.createElement('canvas')\n  canvas.width = width\n  canvas.height = height\n\n  let context = canvas.getContext('2d')\n\n  return {\n    width, height, context,\n    mount, clear, render\n  }\n\n  function mount(element) {\n    if (typeof element === 'string')\n      element = document.querySelector(element)\n    if (!element)\n      throw new TypeError(`Cannot mount display on element ${element}`)\n    element.appendChild(canvas)\n    clear()\n  }\n\n  function clear() {\n    context.fillStyle = 'black'\n    context.fillRect(0, 0, width, height)\n  }\n\n  function render() {\n\n  }\n\n}\n","import { Image, Display } from './utils/index'\n\nlet display = Display.create([320, 240])\n\nImage.load('tile.png', setup)\n\nfunction setup(tile) {\n  display.mount('#app')\n  let width  = tile.width  / 2\n  let height = tile.height / 2\n  let side = 8\n  let area = side * side\n  for (let i = area; i--;) {\n    let x = i % side\n    let y = (i - x) / side\n    display.context.drawImage(tile, display.width / 2 + (x - y - 1) * width, display.height / 2 + (x + y) * height - side / 2 * width)\n  }\n  loop()\n}\n\nfunction loop() {\n\n}\n"],"names":["regex","load","paths","callback","Array","isArray","loadOne","images","index","max","length","path","loaded","next","image","id","exec","Image","src","onload","create","size","width","height","canvas","document","createElement","context","getContext","clear","render","mount","element","querySelector","TypeError","appendChild","fillStyle","fillRect","display","Display","setup","tile","side","area","i","x","y","drawImage","loop"],"mappings":"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"}